<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="æ— éšœç¢AIå­¦ä¹ å¹³å° - ä¸“ä¸ºè§†éšœã€å¬éšœäººå£«è®¾è®¡çš„AIå­¦ä¹ å·¥å…·">
    <title>æ— éšœç¢AIå­¦ä¹ å¹³å°</title>

    <!-- PWAæ”¯æŒ -->
    <meta name="theme-color" content="#1a73e8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">

    <style>
        /* ==================== åŸºç¡€æ ·å¼ä¸CSSå˜é‡ ==================== */
        :root {
            /* æ ‡å‡†æ¨¡å¼é¢œè‰² */
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --text-primary: #212121;
            --text-secondary: #666666;
            --accent-color: #1a73e8;
            --success-color: #34a853;
            --error-color: #ea4335;
            --border-color: #e0e0e0;

            /* å­—ä½“å¤§å°åŸºå‡† - é»˜è®¤è®¾ç½®ä¸ºæœ€å¤§ä»¥ä¾¿è§†éšœç”¨æˆ·çœ‹æ¸… */
            --font-size-base: 16px;
            --font-scale: 3;

            /* é—´è· */
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
        }

        /* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
        body.high-contrast {
            --bg-primary: #000000;
            --bg-secondary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --accent-color: #4da6ff;
            --success-color: #66ff66;
            --error-color: #ff6666;
            --border-color: #444444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB",
                         "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: calc(var(--font-size-base) * var(--font-scale));
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        /* ==================== æ— éšœç¢è¾…åŠ©åŠŸèƒ½æ  ==================== */
        .accessibility-toolbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: var(--bg-secondary);
            border-bottom: 2px solid var(--border-color);
            padding: var(--spacing-sm);
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            justify-content: center;
        }

        .toolbar-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: calc(14px * var(--font-scale));
            font-weight: 600;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 44px; /* è§¦æ‘¸ç›®æ ‡æœ€å°å°ºå¯¸ */
            min-width: 44px;
        }

        .toolbar-btn:hover,
        .toolbar-btn:focus {
            background-color: var(--accent-color);
            color: #ffffff;
            transform: scale(1.05);
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        .toolbar-btn:active {
            transform: scale(0.98);
        }

        .toolbar-btn.active {
            background-color: var(--accent-color);
            color: #ffffff;
        }

        /* ==================== ä¸»å®¹å™¨ ==================== */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--spacing-md);
        }

        /* ==================== é¡µé¢å¤´éƒ¨ ==================== */
        .header {
            text-align: center;
            padding: var(--spacing-lg) 0;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: var(--spacing-lg);
        }

        .header h1 {
            font-size: calc(28px * var(--font-scale));
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: var(--spacing-sm);
        }

        .header p {
            font-size: calc(16px * var(--font-scale));
            color: var(--text-secondary);
        }

        /* ==================== è¯­éŸ³æ§åˆ¶é¢æ¿ ==================== */
        .voice-panel {
            background-color: var(--bg-secondary);
            border: 2px solid var(--accent-color);
            border-radius: 12px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .voice-status {
            font-size: calc(18px * var(--font-scale));
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: var(--spacing-md);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-controls {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
        }

        .voice-btn {
            padding: var(--spacing-md) var(--spacing-lg);
            font-size: calc(18px * var(--font-scale));
            font-weight: 600;
            color: #ffffff;
            background-color: var(--accent-color);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            min-height: 56px;
            min-width: 120px;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .voice-btn:hover,
        .voice-btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            outline: 3px solid var(--accent-color);
            outline-offset: 3px;
        }

        .voice-btn:active {
            transform: translateY(0);
        }

        .voice-btn.speaking {
            background-color: var(--success-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* ==================== ä»»åŠ¡å¡ç‰‡ ==================== */
        .task-section {
            margin-bottom: var(--spacing-xl);
        }

        .task-card {
            background-color: var(--bg-secondary);
            border: 3px solid var(--border-color);
            border-radius: 12px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            transition: all 0.3s;
        }

        .task-card.active {
            border-color: var(--accent-color);
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);
        }

        .task-card.completed {
            border-color: var(--success-color);
            opacity: 0.8;
        }

        .task-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .task-number {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            background-color: var(--accent-color);
            color: #ffffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: calc(20px * var(--font-scale));
            font-weight: 700;
        }

        .task-card.completed .task-number {
            background-color: var(--success-color);
        }

        .task-title {
            flex: 1;
            font-size: calc(20px * var(--font-scale));
            font-weight: 600;
            color: var(--text-primary);
        }

        .task-content {
            font-size: calc(18px * var(--font-scale));
            color: var(--text-primary);
            line-height: 1.8;
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-md);
            background-color: var(--bg-primary);
            border-radius: 8px;
        }

        .task-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            justify-content: center;
        }

        .task-btn {
            flex: 1;
            min-width: 120px;
            padding: var(--spacing-md);
            font-size: calc(16px * var(--font-scale));
            font-weight: 600;
            border: 2px solid;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 48px;
        }

        .task-btn-primary {
            background-color: var(--accent-color);
            color: #ffffff;
            border-color: var(--accent-color);
        }

        .task-btn-secondary {
            background-color: var(--bg-primary);
            color: var(--accent-color);
            border-color: var(--accent-color);
        }

        .task-btn:hover,
        .task-btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        .task-btn:active {
            transform: translateY(0);
        }

        .task-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ==================== è¿›åº¦æŒ‡ç¤ºå™¨ ==================== */
        .progress-section {
            margin-bottom: var(--spacing-lg);
        }

        .progress-bar-container {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 50px;
            height: 40px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: 600;
            font-size: calc(16px * var(--font-scale));
        }

        .progress-text {
            text-align: center;
            margin-top: var(--spacing-sm);
            font-size: calc(16px * var(--font-scale));
            color: var(--text-secondary);
        }

        /* ==================== é€šçŸ¥æ¶ˆæ¯ ==================== */
        .notification {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            max-width: 90%;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: 8px;
            font-size: calc(16px * var(--font-scale));
            font-weight: 600;
            z-index: 2000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .notification.success {
            background-color: var(--success-color);
            color: #ffffff;
        }

        .notification.error {
            background-color: var(--error-color);
            color: #ffffff;
        }

        .notification.info {
            background-color: var(--accent-color);
            color: #ffffff;
        }

        /* ==================== å“åº”å¼è®¾è®¡ ==================== */
        @media (max-width: 600px) {
            .container {
                padding: var(--spacing-sm);
            }

            .header h1 {
                font-size: calc(24px * var(--font-scale));
            }

            .voice-btn {
                min-width: 100px;
                font-size: calc(16px * var(--font-scale));
            }

            .task-actions {
                flex-direction: column;
            }

            .task-btn {
                width: 100%;
            }
        }

        /* ==================== å±å¹•é˜…è¯»å™¨ä¸“ç”¨ ==================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* ==================== ç„¦ç‚¹å¯è§æ€§å¢å¼º ==================== */
        *:focus-visible {
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }

        /* ==================== è§†é¢‘æ’­æ”¾å™¨ ==================== */
        .video-player-section {
            margin-bottom: var(--spacing-xl);
            background-color: var(--bg-secondary);
            border: 3px solid var(--accent-color);
            border-radius: 12px;
            padding: var(--spacing-lg);
        }

        .video-player-title {
            font-size: calc(24px * var(--font-scale));
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .video-screen {
            background-color: #000000;
            border-radius: 8px;
            aspect-ratio: 16 / 9;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-md);
            position: relative;
            overflow: hidden;
        }

        .video-placeholder {
            color: #ffffff;
            font-size: calc(20px * var(--font-scale));
            text-align: center;
            padding: var(--spacing-lg);
        }

        .video-status {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: calc(48px * var(--font-scale));
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0,0,0,0.8);
        }

        .video-controls {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .video-progress-bar {
            width: 100%;
            height: 12px;
            background-color: var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
        }

        .video-progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.1s linear;
        }

        .video-buttons {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
        }

        .video-btn {
            padding: var(--spacing-lg) var(--spacing-xl);
            font-size: calc(20px * var(--font-scale));
            font-weight: 700;
            color: #ffffff;
            background-color: var(--accent-color);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            min-height: 64px;
            min-width: 150px;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .video-btn:hover,
        .video-btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .video-btn:active {
            transform: translateY(0);
        }

        .video-time-display {
            text-align: center;
            font-size: calc(18px * var(--font-scale));
            color: var(--text-secondary);
            margin-top: var(--spacing-sm);
        }


        /* ==================== åˆå§‹é€‰æ‹©é¡µé¢ ==================== */
        .selection-page {
            position: relative;
            width: 100%;
            min-height: 100vh;
            background-color: var(--bg-primary);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-lg);
            overflow-y: visible;
        }

        .selection-page.hidden {
            display: none;
        }

        .selection-icon {
            font-size: 120px;
            margin-bottom: var(--spacing-xl);
            animation: pulse 2s infinite;
        }

        .selection-title {
            font-size: calc(32px * var(--font-scale));
            font-weight: 700;
            color: var(--accent-color);
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .selection-subtitle {
            font-size: calc(24px * var(--font-scale));
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .selection-buttons {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
            width: 100%;
            max-width: 600px;
        }

        .selection-btn {
            padding: var(--spacing-xl);
            font-size: calc(28px * var(--font-scale));
            font-weight: 700;
            color: #ffffff;
            background-color: var(--accent-color);
            border: 4px solid var(--accent-color);
            border-radius: 16px;
            cursor: pointer;
            min-height: 120px;
            transition: all 0.3s;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .selection-btn:hover,
        .selection-btn:focus {
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(0,0,0,0.3);
            outline: 4px solid var(--accent-color);
            outline-offset: 4px;
        }

        .selection-btn:active {
            transform: scale(0.98);
        }

        .selection-btn.visual-impaired {
            background-color: #ff6b6b;
            border-color: #ff6b6b;
        }

        .selection-btn.hearing-impaired {
            background-color: #4ecdc4;
            border-color: #4ecdc4;
        }

        .selection-btn.teacher-mode {
            background-color: #9c27b0;
            border-color: #9c27b0;
        }

    </style>
</head>
<body>
    <!-- åˆå§‹é€‰æ‹©é¡µé¢ -->
    <div class="selection-page" id="selectionPage">
        <div class="selection-icon" aria-hidden="true">ğŸ¤</div>
        <h1 class="selection-title">æ¬¢è¿ä½¿ç”¨æ— éšœç¢AIå­¦ä¹ å¹³å°</h1>
        <p class="selection-subtitle">è¯·é€‰æ‹©æ‚¨çš„ä½¿ç”¨æ¨¡å¼</p>

        <div class="selection-buttons">
            <button class="selection-btn visual-impaired" id="visualImpairedBtn"
                    aria-label="è¿›å…¥è§†éšœç”¨æˆ·æ¨¡å¼">
                ğŸ‘ï¸ è§†éšœç”¨æˆ·æ¨¡å¼
            </button>
            <button class="selection-btn hearing-impaired" id="hearingImpairedBtn"
                    aria-label="è¿›å…¥å¬éšœç”¨æˆ·æ¨¡å¼">
                ğŸ‘‚ å¬éšœç”¨æˆ·æ¨¡å¼
            </button>
            <button class="selection-btn teacher-mode" id="teacherModeBtn"
                    aria-label="è¿›å…¥æ•™å¸ˆæ¨¡å¼">
                ğŸ‘¨â€ğŸ« æ•™å¸ˆæ¨¡å¼
            </button>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ -->
    <div id="mainContent" style="display: none;">

    <!-- æ— éšœç¢è¾…åŠ©åŠŸèƒ½æ  -->
    <div class="accessibility-toolbar" role="toolbar" aria-label="æ— éšœç¢è¾…åŠ©åŠŸèƒ½">
        <button class="toolbar-btn" id="contrastBtn" aria-label="åˆ‡æ¢é«˜å¯¹æ¯”åº¦æ¨¡å¼" aria-pressed="false">
            ğŸŒ“ é«˜å¯¹æ¯”åº¦
        </button>
        <button class="toolbar-btn" id="fontDecreaseBtn" aria-label="å‡å°å­—ä½“">
            A-
        </button>
        <button class="toolbar-btn" id="fontIncreaseBtn" aria-label="å¢å¤§å­—ä½“">
            A+
        </button>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <header class="header" role="banner">
            <h1>æ— éšœç¢AIå­¦ä¹ å¹³å°</h1>
            <p>ä¸“ä¸ºè§†éšœã€å¬éšœäººå£«è®¾è®¡çš„AIå­¦ä¹ å·¥å…·</p>
        </header>

        <!-- è¯­éŸ³æ§åˆ¶é¢æ¿ -->
        <section class="voice-panel" role="region" aria-label="è¯­éŸ³æ§åˆ¶">
            <div class="voice-status" id="voiceStatus" aria-live="polite" aria-atomic="true">
                ç‚¹å‡»"å¼€å§‹è¯­éŸ³å¼•å¯¼"å¼€å§‹å­¦ä¹ 
            </div>
            <div class="voice-controls">
                <button class="voice-btn" id="startVoiceBtn" aria-label="å¼€å§‹è¯­éŸ³å¼•å¯¼">
                    ğŸ”Š å¼€å§‹è¯­éŸ³å¼•å¯¼
                </button>
                <button class="voice-btn" id="pauseVoiceBtn" aria-label="æš‚åœè¯­éŸ³" style="display: none;">
                    â¸ï¸ æš‚åœ
                </button>
                <button class="voice-btn" id="replayVoiceBtn" aria-label="é‡æ’­å½“å‰æ­¥éª¤">
                    ğŸ”„ é‡æ’­
                </button>
            </div>
        </section>

        <!-- è§†é¢‘æ’­æ”¾å™¨ -->
        <section class="video-player-section" role="region" aria-label="æ•™å­¦è§†é¢‘æ’­æ”¾å™¨">
            <h2 class="video-player-title">ğŸ“¹ AIå­¦ä¹ æ•™å­¦è§†é¢‘</h2>

            <div class="video-screen" id="videoScreen" role="img" aria-label="è§†é¢‘æ’­æ”¾åŒºåŸŸ">
                <div class="video-placeholder" id="videoPlaceholder">
                    ç‚¹å‡»"æ’­æ”¾è§†é¢‘"å¼€å§‹è§‚çœ‹æ•™å­¦å†…å®¹
                </div>
                <div class="video-status" id="videoStatus" style="display: none;">â–¶ï¸</div>
            </div>

            <div class="video-controls">
                <div class="video-progress-bar" id="videoProgressBar" role="progressbar"
                     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="è§†é¢‘æ’­æ”¾è¿›åº¦">
                    <div class="video-progress-fill" id="videoProgressFill"></div>
                </div>

                <div class="video-buttons">
                    <button class="video-btn" id="playPauseBtn" aria-label="æ’­æ”¾æˆ–æš‚åœè§†é¢‘">
                        â–¶ï¸ æ’­æ”¾è§†é¢‘
                    </button>
                    <button class="video-btn" id="restartBtn" aria-label="é‡æ–°æ’­æ”¾è§†é¢‘">
                        ğŸ”„ é‡æ–°æ’­æ”¾
                    </button>
                </div>

                <div class="video-time-display" id="videoTimeDisplay" aria-live="polite">
                    00:00 / 05:00
                </div>
            </div>
        </section>

        <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
        <section class="progress-section" role="region" aria-label="å­¦ä¹ è¿›åº¦">
            <div class="progress-bar-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar" id="progressBar" style="width: 0%;">
                    0%
                </div>
            </div>
            <p class="progress-text" id="progressText">å·²å®Œæˆ 0/5 ä¸ªä»»åŠ¡</p>
        </section>

        <!-- ä»»åŠ¡åˆ—è¡¨ -->
        <section class="task-section" role="region" aria-label="å­¦ä¹ ä»»åŠ¡åˆ—è¡¨">
            <!-- ä»»åŠ¡1 -->
            <article class="task-card active" id="task1" data-task-id="1">
                <div class="task-header">
                    <div class="task-number" aria-hidden="true">1</div>
                    <h2 class="task-title">äº†è§£AIåŠ©æ‰‹</h2>
                </div>
                <div class="task-content">
                    <p>AIåŠ©æ‰‹æ˜¯ä¸€ä¸ªæ™ºèƒ½å¯¹è¯å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å®Œæˆå„ç§ä»»åŠ¡ã€‚è¯·ç‚¹å‡»"å¼€å§‹ä»»åŠ¡"æŒ‰é’®ï¼Œç„¶åå¯¹ç€æ‰‹æœºè¯´ï¼š"ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±"ã€‚</p>
                </div>
                <div class="task-actions">
                    <button class="task-btn task-btn-primary" data-action="start" aria-label="å¼€å§‹ä»»åŠ¡1">
                        å¼€å§‹ä»»åŠ¡
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="replay" aria-label="é‡æ’­ä»»åŠ¡1è¯´æ˜">
                        è¯­éŸ³é‡æ’­
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="skip" aria-label="è·³è¿‡ä»»åŠ¡1">
                        è·³è¿‡
                    </button>
                </div>
            </article>

            <!-- ä»»åŠ¡2 -->
            <article class="task-card" id="task2" data-task-id="2">
                <div class="task-header">
                    <div class="task-number" aria-hidden="true">2</div>
                    <h2 class="task-title">æå‡ºç®€å•é—®é¢˜</h2>
                </div>
                <div class="task-content">
                    <p>ç°åœ¨å°è¯•å‘AIæä¸€ä¸ªç®€å•çš„é—®é¢˜ã€‚è¯·è¯´ï¼š"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"æˆ–è€…"å¸®æˆ‘æ¨èä¸€æœ¬ä¹¦"ã€‚</p>
                </div>
                <div class="task-actions">
                    <button class="task-btn task-btn-primary" data-action="start" aria-label="å¼€å§‹ä»»åŠ¡2" disabled>
                        å¼€å§‹ä»»åŠ¡
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="replay" aria-label="é‡æ’­ä»»åŠ¡2è¯´æ˜">
                        è¯­éŸ³é‡æ’­
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="skip" aria-label="è·³è¿‡ä»»åŠ¡2">
                        è·³è¿‡
                    </button>
                </div>
            </article>

            <!-- ä»»åŠ¡3 -->
            <article class="task-card" id="task3" data-task-id="3">
                <div class="task-header">
                    <div class="task-number" aria-hidden="true">3</div>
                    <h2 class="task-title">ç”Ÿæˆè´­ç‰©æ¸…å•</h2>
                </div>
                <div class="task-content">
                    <p>è®©AIå¸®æ‚¨ç”Ÿæˆä¸€ä»½è´­ç‰©æ¸…å•ã€‚è¯·è¯´ï¼š"å¸®æˆ‘åˆ—ä¸€ä»½å‘¨æœ«è¶…å¸‚è´­ç‰©æ¸…å•ï¼ŒåŒ…å«è”¬èœã€æ°´æœå’Œæ—¥ç”¨å“"ã€‚</p>
                </div>
                <div class="task-actions">
                    <button class="task-btn task-btn-primary" data-action="start" aria-label="å¼€å§‹ä»»åŠ¡3" disabled>
                        å¼€å§‹ä»»åŠ¡
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="replay" aria-label="é‡æ’­ä»»åŠ¡3è¯´æ˜">
                        è¯­éŸ³é‡æ’­
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="skip" aria-label="è·³è¿‡ä»»åŠ¡3">
                        è·³è¿‡
                    </button>
                </div>
            </article>

            <!-- ä»»åŠ¡4 -->
            <article class="task-card" id="task4" data-task-id="4">
                <div class="task-header">
                    <div class="task-number" aria-hidden="true">4</div>
                    <h2 class="task-title">å¤åˆ¶AIå›å¤</h2>
                </div>
                <div class="task-content">
                    <p>å­¦ä¹ å¦‚ä½•ä¿å­˜AIçš„å›å¤ã€‚å½“AIç”Ÿæˆå†…å®¹åï¼Œæ‰¾åˆ°"å¤åˆ¶"æŒ‰é’®å¹¶ç‚¹å‡»å®ƒï¼Œå°†å†…å®¹ä¿å­˜åˆ°å‰ªè´´æ¿ã€‚</p>
                </div>
                <div class="task-actions">
                    <button class="task-btn task-btn-primary" data-action="start" aria-label="å¼€å§‹ä»»åŠ¡4" disabled>
                        å¼€å§‹ä»»åŠ¡
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="replay" aria-label="é‡æ’­ä»»åŠ¡4è¯´æ˜">
                        è¯­éŸ³é‡æ’­
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="skip" aria-label="è·³è¿‡ä»»åŠ¡4">
                        è·³è¿‡
                    </button>
                </div>
            </article>

            <!-- ä»»åŠ¡5 -->
            <article class="task-card" id="task5" data-task-id="5">
                <div class="task-header">
                    <div class="task-number" aria-hidden="true">5</div>
                    <h2 class="task-title">å®Œæˆå­¦ä¹ </h2>
                </div>
                <div class="task-content">
                    <p>æ­å–œæ‚¨ï¼æ‚¨å·²ç»å­¦ä¼šäº†AIåŠ©æ‰‹çš„åŸºæœ¬æ“ä½œã€‚ç‚¹å‡»"å®Œæˆå­¦ä¹ "æŒ‰é’®æŸ¥çœ‹æ‚¨çš„å­¦ä¹ æˆæœã€‚</p>
                </div>
                <div class="task-actions">
                    <button class="task-btn task-btn-primary" data-action="complete" aria-label="å®Œæˆå­¦ä¹ " disabled>
                        å®Œæˆå­¦ä¹ 
                    </button>
                    <button class="task-btn task-btn-secondary" data-action="replay" aria-label="é‡æ’­ä»»åŠ¡5è¯´æ˜">
                        è¯­éŸ³é‡æ’­
                    </button>
                </div>
            </article>
        </section>
    </div>
    </div><!-- å…³é—­ mainContent -->

    <script>
        // ==================== åˆå§‹é€‰æ‹©é¡µé¢åŠŸèƒ½ ====================
        const selectionPage = document.getElementById('selectionPage');
        const mainContent = document.getElementById('mainContent');
        const visualImpairedBtn = document.getElementById('visualImpairedBtn');
        const hearingImpairedBtn = document.getElementById('hearingImpairedBtn');
        const teacherModeBtn = document.getElementById('teacherModeBtn');


        // è§†éšœç”¨æˆ·æ¨¡å¼
        visualImpairedBtn.addEventListener('click', () => {
            enterVisualImpairedMode();
        });

        // å¬éšœç”¨æˆ·æ¨¡å¼
        hearingImpairedBtn.addEventListener('click', () => {
            enterHearingImpairedMode();
        });

        // æ•™å¸ˆæ¨¡å¼
        teacherModeBtn.addEventListener('click', () => {
            enterTeacherMode();
        });

        function enterVisualImpairedMode() {
            // è·³è½¬åˆ°è¯¾ç¨‹é€‰æ‹©é¡µé¢
            window.location.href = 'course_selection.html?mode=visual';
        }

        function enterHearingImpairedMode() {
            // è·³è½¬åˆ°è¯¾ç¨‹é€‰æ‹©é¡µé¢
            window.location.href = 'course_selection.html?mode=hearing';
        }

        function enterTeacherMode() {
            // è·³è½¬åˆ°è¯¾ç¨‹é€‰æ‹©é¡µé¢ï¼ˆæ•™å¸ˆæ¨¡å¼ï¼‰
            window.location.href = 'course_selection.html?mode=teacher';
        }

        // ==================== å…¨å±€çŠ¶æ€ç®¡ç† ====================
        const state = {
            currentTask: 1,
            completedTasks: [],
            fontScale: 3,
            highContrast: false,
            vibrationEnabled: false,
            voiceEnabled: false,
            isSpeaking: false
        };

        // ==================== è¾…åŠ©åŠŸèƒ½ï¼šé«˜å¯¹æ¯”åº¦æ¨¡å¼ ====================
        const contrastBtn = document.getElementById('contrastBtn');
        contrastBtn.addEventListener('click', () => {
            state.highContrast = !state.highContrast;
            document.body.classList.toggle('high-contrast');
            contrastBtn.classList.toggle('active');
            contrastBtn.setAttribute('aria-pressed', state.highContrast);

            announceToScreenReader(state.highContrast ? 'å·²å¼€å¯é«˜å¯¹æ¯”åº¦æ¨¡å¼' : 'å·²å…³é—­é«˜å¯¹æ¯”åº¦æ¨¡å¼');
            triggerVibration(50);
        });

        // ==================== è¾…åŠ©åŠŸèƒ½ï¼šå­—ä½“ç¼©æ”¾ ====================
        const fontIncreaseBtn = document.getElementById('fontIncreaseBtn');
        const fontDecreaseBtn = document.getElementById('fontDecreaseBtn');

        fontIncreaseBtn.addEventListener('click', () => {
            if (state.fontScale < 3) {
                state.fontScale += 0.2;
                document.documentElement.style.setProperty('--font-scale', state.fontScale);
                announceToScreenReader(`å­—ä½“å·²æ”¾å¤§ï¼Œå½“å‰ç¼©æ”¾æ¯”ä¾‹ ${Math.round(state.fontScale * 100)}%`);
                triggerVibration(50);
            }
        });

        fontDecreaseBtn.addEventListener('click', () => {
            if (state.fontScale > 1) {
                state.fontScale -= 0.2;
                document.documentElement.style.setProperty('--font-scale', state.fontScale);
                announceToScreenReader(`å­—ä½“å·²ç¼©å°ï¼Œå½“å‰ç¼©æ”¾æ¯”ä¾‹ ${Math.round(state.fontScale * 100)}%`);
                triggerVibration(50);
            }
        });

        // ==================== è¾…åŠ©åŠŸèƒ½ï¼šæŒ¯åŠ¨åé¦ˆ ====================
        const vibrationBtn = document.getElementById('vibrationBtn');
        if (vibrationBtn) {
            vibrationBtn.addEventListener('click', () => {
                state.vibrationEnabled = !state.vibrationEnabled;
                vibrationBtn.classList.toggle('active');
                vibrationBtn.setAttribute('aria-pressed', state.vibrationEnabled);

                announceToScreenReader(state.vibrationEnabled ? 'å·²å¼€å¯æŒ¯åŠ¨åé¦ˆ' : 'å·²å…³é—­æŒ¯åŠ¨åé¦ˆ');
                if (state.vibrationEnabled) {
                    triggerVibration(100);
                }
            });
        }

        // æŒ¯åŠ¨åé¦ˆå‡½æ•°
        function triggerVibration(duration = 50) {
            if (state.vibrationEnabled && 'vibrate' in navigator) {
                navigator.vibrate(duration);
            }
        }

        // ==================== è§†é¢‘æ’­æ”¾å™¨åŠŸèƒ½ ====================
        const videoPlayer = {
            isPlaying: false,
            currentTime: 0,
            duration: 300, // 5åˆ†é’Ÿ = 300ç§’
            interval: null
        };

        const videoScreen = document.getElementById('videoScreen');
        const videoPlaceholder = document.getElementById('videoPlaceholder');
        const videoStatus = document.getElementById('videoStatus');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const videoProgressBar = document.getElementById('videoProgressBar');
        const videoProgressFill = document.getElementById('videoProgressFill');
        const videoTimeDisplay = document.getElementById('videoTimeDisplay');

        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // æ›´æ–°è§†é¢‘è¿›åº¦
        function updateVideoProgress() {
            const percentage = (videoPlayer.currentTime / videoPlayer.duration) * 100;
            videoProgressFill.style.width = `${percentage}%`;
            videoProgressBar.setAttribute('aria-valuenow', percentage);
            videoTimeDisplay.textContent = `${formatTime(videoPlayer.currentTime)} / ${formatTime(videoPlayer.duration)}`;
        }

        // æ’­æ”¾è§†é¢‘
        function playVideo() {
            videoPlayer.isPlaying = true;
            videoPlaceholder.style.display = 'none';
            videoStatus.style.display = 'block';
            videoStatus.textContent = 'â–¶ï¸';
            playPauseBtn.textContent = 'â¸ï¸ æš‚åœ';
            playPauseBtn.setAttribute('aria-label', 'æš‚åœè§†é¢‘');

            announceToScreenReader('è§†é¢‘æ­£åœ¨æ’­æ”¾');

            // æ¨¡æ‹Ÿè§†é¢‘æ’­æ”¾
            videoPlayer.interval = setInterval(() => {
                videoPlayer.currentTime += 1;
                updateVideoProgress();


                // è§†é¢‘ç»“æŸ
                if (videoPlayer.currentTime >= videoPlayer.duration) {
                    pauseVideo();
                    showNotification('è§†é¢‘æ’­æ”¾å®Œæ¯•', 'success');
                }
            }, 1000);
        }

        // æš‚åœè§†é¢‘
        function pauseVideo() {
            videoPlayer.isPlaying = false;
            videoStatus.textContent = 'â¸ï¸';
            playPauseBtn.textContent = 'â–¶ï¸ æ’­æ”¾';
            playPauseBtn.setAttribute('aria-label', 'æ’­æ”¾è§†é¢‘');

            if (videoPlayer.interval) {
                clearInterval(videoPlayer.interval);
                videoPlayer.interval = null;
            }

            announceToScreenReader('è§†é¢‘å·²æš‚åœ');
        }

        // é‡å¯è§†é¢‘
        function restartVideo() {
            pauseVideo();
            videoPlayer.currentTime = 0;
            updateVideoProgress();
            videoPlaceholder.style.display = 'block';
            videoStatus.style.display = 'none';
            announceToScreenReader('è§†é¢‘å·²é‡ç½®åˆ°å¼€å§‹ä½ç½®');
        }

        // æ’­æ”¾/æš‚åœæŒ‰é’®äº‹ä»¶
        playPauseBtn.addEventListener('click', () => {
            if (videoPlayer.isPlaying) {
                pauseVideo();
            } else {
                playVideo();
            }
        });

        // é‡å¯æŒ‰é’®äº‹ä»¶
        restartBtn.addEventListener('click', () => {
            restartVideo();
        });

        // è¿›åº¦æ¡ç‚¹å‡»äº‹ä»¶
        videoProgressBar.addEventListener('click', (e) => {
            const rect = videoProgressBar.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const percentage = clickX / rect.width;
            videoPlayer.currentTime = Math.floor(percentage * videoPlayer.duration);
            updateVideoProgress();
        });


        // ==================== å±å¹•é˜…è¯»å™¨é€šçŸ¥ ====================
        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('role', 'status');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = message;
            document.body.appendChild(announcement);

            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }


        // ==================== è¯­éŸ³æ§åˆ¶æŒ‰é’® ====================
        const startVoiceBtn = document.getElementById('startVoiceBtn');
        const pauseVoiceBtn = document.getElementById('pauseVoiceBtn');
        const replayVoiceBtn = document.getElementById('replayVoiceBtn');

        startVoiceBtn.addEventListener('click', () => {
            state.voiceEnabled = true;
            const currentTaskCard = document.querySelector(`#task${state.currentTask}`);
            const taskContent = currentTaskCard.querySelector('.task-content p').textContent;
            announceToScreenReader('å·²å¼€å§‹è¯­éŸ³å¼•å¯¼');
        });

        pauseVoiceBtn.addEventListener('click', () => {
            announceToScreenReader('è¯­éŸ³å·²æš‚åœ');
        });

        replayVoiceBtn.addEventListener('click', () => {
            announceToScreenReader('æ­£åœ¨é‡æ’­å½“å‰ä»»åŠ¡è¯´æ˜');
        });



        // ==================== ä»»åŠ¡ç®¡ç†åŠŸèƒ½ ====================
        function completeTask(taskId) {
            if (!state.completedTasks.includes(taskId)) {
                state.completedTasks.push(taskId);

                const taskCard = document.getElementById(`task${taskId}`);
                taskCard.classList.add('completed');
                taskCard.classList.remove('active');

                updateProgress();
                triggerVibration(200);
                showNotification(`ä»»åŠ¡${taskId}å·²å®Œæˆï¼`, 'success');
                announceToScreenReader(`ä»»åŠ¡${taskId}å·²å®Œæˆ`);

                if (taskId < 5) {
                    activateNextTask(taskId + 1);
                } else {
                    showNotification('æ­å–œï¼æ‚¨å·²å®Œæˆæ‰€æœ‰å­¦ä¹ ä»»åŠ¡ï¼', 'success');
                }
            }
        }

        function activateNextTask(taskId) {
            state.currentTask = taskId;
            const taskCard = document.getElementById(`task${taskId}`);
            taskCard.classList.add('active');

            const startBtn = taskCard.querySelector('[data-action="start"]') || taskCard.querySelector('[data-action="complete"]');
            if (startBtn) {
                startBtn.disabled = false;
            }

            taskCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

            announceToScreenReader(`å·²æ¿€æ´»ä»»åŠ¡${taskId}`);
        }

        function updateProgress() {
            const totalTasks = 5;
            const completed = state.completedTasks.length;
            const percentage = Math.round((completed / totalTasks) * 100);

            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');

            progressBar.style.width = `${percentage}%`;
            progressBar.textContent = `${percentage}%`;
            progressBar.parentElement.setAttribute('aria-valuenow', percentage);

            progressText.textContent = `å·²å®Œæˆ ${completed}/${totalTasks} ä¸ªä»»åŠ¡`;
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.setAttribute('role', 'alert');

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // ==================== ä»»åŠ¡æŒ‰é’®äº‹ä»¶ç›‘å¬ ====================
        document.querySelectorAll('.task-card').forEach(card => {
            const taskId = parseInt(card.dataset.taskId);
            const buttons = card.querySelectorAll('.task-btn');

            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.dataset.action;

                    switch(action) {
                        case 'start':
                            showNotification(`ä»»åŠ¡${taskId}å·²å¼€å§‹`, 'info');

                            // æ¨¡æ‹Ÿä»»åŠ¡å®Œæˆï¼ˆå®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šæœ‰çœŸå®çš„ä»»åŠ¡äº¤äº’ï¼‰
                            setTimeout(() => {
                                completeTask(taskId);
                            }, 3000);
                            break;

                        case 'replay':
                            announceToScreenReader(`æ­£åœ¨é‡æ’­ä»»åŠ¡${taskId}è¯´æ˜`);
                            break;

                        case 'skip':
                            completeTask(taskId);
                            showNotification(`å·²è·³è¿‡ä»»åŠ¡${taskId}`, 'info');
                            break;

                        case 'complete':
                            completeTask(taskId);
                            break;
                    }

                    triggerVibration(50);
                });
            });
        });

        // ==================== é¡µé¢åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', () => {
            // æ£€æµ‹ç³»ç»Ÿåå¥½è®¾ç½®
            if (window.matchMedia && window.matchMedia('(prefers-contrast: high)').matches) {
                contrastBtn.click();
            }

            // åˆå§‹åŒ–è¿›åº¦
            updateProgress();

            announceToScreenReader('é¡µé¢å·²åŠ è½½å®Œæˆï¼Œå‡†å¤‡å¼€å§‹å­¦ä¹ ');

            announceToScreenReader('é¡µé¢å·²åŠ è½½å®Œæˆï¼Œå‡†å¤‡å¼€å§‹å­¦ä¹ ');
        });


        // ==================== PWAæ”¯æŒ ====================
        // Service WorkeråŠŸèƒ½æš‚æœªå®ç°
        // if ('serviceWorker' in navigator) {
        //     window.addEventListener('load', () => {
        //         navigator.serviceWorker.register('/sw.js').catch(() => {
        //             console.log('Service Worker registration failed');
        //         });
        //     });
        // }
    </script>
</body>
</html>
